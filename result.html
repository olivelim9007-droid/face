<!DOCTYPE html>
<html lang="ko">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>피부 진단 결과</title>
		<link rel="stylesheet" href="./result-styles.css">
	</head>
	<body class="result-elem-1">
	<div class="result-elem-2">
		<div class="result-elem-3">
			<div class="result-elem-4">
				<div class="result-elem-5"></div>
			</div>
			<!-- 헤더: 브리핑 위에 붙임 -->
			<div class="result-header">
				<div class="result-header-inner">
						<a id="result-back" href="./index.html" class="result-header-back" aria-label="뒤로">
						<img class="result-header-back-icon" src="./img/icon_modal_back.svg" alt="">
					</a>
					<div class="result-header-title">피부 진단</div>
					<button type="button" class="result-header-icon-wrap" id="result-close" aria-label="닫기">
						<img class="result-header-icon" src="./img/result_header_icon.svg" alt="">
					</button>
				</div>
			</div>
			<div class="result-elem-6">
				<div class="result-elem-7">
					<div class="result-elem-8">
						<div class="result-elem-9">
							<div class="result-elem-10">브리핑</div>
						</div>
					</div>
					<div class="result-elem-11 result-header-old is-hidden">
						<a href="./index.html" class="result-elem-12" aria-label="뒤로">
							<div class="result-elem-13">
								<div class="result-elem-14">
									<div class="result-elem-15">&#10094;</div>
								</div>
							</div>
						</a>
						<div class="result-elem-16">피부 진단</div>
						<div class="result-elem-17">
							<img class="result-elem-18" src="./img/result_icons.svg" alt=""></img>
						</div>
					</div>
					<img class="result-elem-19" src="./img/profile_image.png" alt=""></img>
					<div class="result-elem-20">
						<div class="result-elem-21">
							<div class="result-elem-22">
								<span class="result-elem-23">피부 점수는 </span><span class="result-elem-24" id="skin-score">80</span><span class="result-elem-25">점</span>
							</div>
						</div>
						<div class="result-elem-26">컨디션은 좋지만 수분이 금방 빠져나가는 타입으로 보여요. 속부터 채우는 촉촉한 케어가 필요해요.<br/>피부 장벽과 탄력은 안정적이지만 수분 손실 지표가 다소 높습니다.</div>
					</div>
				</div>
				<div class="result-elem-27">
					<div class="result-elem-28">
						<div class="result-elem-29">피부 그래프</div>
					</div>
				</div>
				<div class="result-elem-30">
					<img class="result-elem-31" src="./img/result_lines.svg" alt=""></img>
					<img class="result-elem-32" src="./img/result_path.svg" alt="">
					<div class="result-elem-33">
						<div class="result-elem-34">색소</div>
						<div class="result-elem-35">주름</div>
						<div class="result-elem-36">탄력</div>
						<div class="result-elem-37">탄력</div>
						<div class="result-elem-38">좌우 대칭</div>
						<div class="result-elem-39">수분</div>
					</div>
				</div>
				<div class="result-elem-40">
					<div class="result-elem-41">
						<div class="result-elem-42">루틴</div>
					</div>
					<div class="result-elem-43">
						<div class="result-elem-44">
							<div class="result-elem-45">저자극 클렌징</div>
						</div>
						<div class="result-elem-46">
							<div class="result-elem-47">
								<div class="result-elem-48">
									<div class="result-elem-49">수분 토너 충분히 흡수</div>
								</div>
							</div>
						</div>
						<div class="result-elem-50">
							<div class="result-elem-51">히알루론산/판테놀 에센스</div>
						</div>
						<div class="result-elem-52">
							<div class="result-elem-53">보습크림으로 수분 잠금</div>
						</div>
						<div class="result-elem-54">
							<div class="result-elem-55">자외선 차단</div>
						</div>
					</div>
				</div>
				<div class="result-elem-56">
					<div class="result-elem-57">
						<div class="result-elem-58">
							<div class="result-elem-59">오늘의 추천 스타일</div>
						</div>
						<div class="result-elem-60">
							<div class="result-elem-61">
								<img class="result-elem-62" src="./img/result-elem-62.png" alt="">
								<div class="result-elem-63">
									<div class="result-elem-64">Cheek</div>
									<div class="result-elem-65">톤 대비 결과, 저채도 핑크가 가장 안정적입니다.</div>
								</div>
							</div>
							<div class="result-elem-66">
								<img class="result-elem-67" src="./img/result-elem-67.png" alt="">
								<div class="result-elem-68">
									<div class="result-elem-69">Peach</div>
									<div class="result-elem-70">채도 분석 결과, 저채도 피치가 가장 안정적입니다.</div>
								</div>
							</div>
							<div class="result-elem-71">
								<img class="result-elem-72" src="./img/result-elem-72.png" alt="">
								<div class="result-elem-73">
									<div class="result-elem-74">Cheek</div>
									<div class="result-elem-75">눈동자 브라운 컬러가 자연스럽게 균형을 맞춥니다.</div>
								</div>
							</div>
							<div class="result-elem-76">
								<img class="result-elem-77" src="./img/result-elem-77.png" alt="">
								<div class="result-elem-78">
									<div class="result-elem-79">Wavy</div>
									<div class="result-elem-80">얼굴 윤곽 분석 결과 웨이브 볼륨이 입체감을 줍니다.</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="result-elem-81" id="save-btn" role="button" tabindex="0">
				<div class="result-elem-82">저장하기</div>
			</div>
		</div>
	</div>
	<!-- 저장 시 보여줄 이미지 모달 -->
	<div id="saved-image-modal" class="saved-image-modal is-hidden" aria-hidden="true">
		<div class="saved-image-modal-backdrop"></div>
		<div class="saved-image-modal-content">
			<img id="saved-image-preview" src="" alt="저장된 결과">
			<button type="button" class="saved-image-modal-close" id="saved-image-close">닫기</button>
		</div>
	</div>
</body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
	<script>
		// 스캔 결과에서 전달된 점수 표시 (선택)
		var params = new URLSearchParams(location.search);
		var score = params.get('score');
		if (score) document.getElementById('skin-score').textContent = score;
		// 스캔 시 캡처한 얼굴 이미지를 result-elem-19에 표시
		try {
			var faceUrl = sessionStorage.getItem('faceCapture');
			if (faceUrl) {
				var faceImg = document.querySelector('.result-elem-19');
				if (faceImg) faceImg.src = faceUrl;
				sessionStorage.removeItem('faceCapture');
			}
		} catch (e) {}
		// 모달 안에서 열렸을 때 뒤로/엑스 버튼 누르면 모달만 닫고 카메라 화면으로
		if (window.self !== window.top) {
			function closeModal() {
				window.parent.postMessage('closeResultModal', '*');
			}
			var backBtn = document.getElementById('result-back');
			if (backBtn) backBtn.addEventListener('click', function(e) { e.preventDefault(); closeModal(); });
			var closeBtn = document.getElementById('result-close');
			if (closeBtn) closeBtn.addEventListener('click', closeModal);
		}
		// 저장하기 클릭 시 결과 화면 캡처해서 이미지로 표시
		var saveBtn = document.getElementById('save-btn');
		var savedModal = document.getElementById('saved-image-modal');
		var savedPreview = document.getElementById('saved-image-preview');
		var savedClose = document.getElementById('saved-image-close');
		var captureTarget = document.querySelector('.result-elem-2');
		if (saveBtn && savedModal && savedPreview && captureTarget) {
			saveBtn.addEventListener('click', function() {
				html2canvas(captureTarget, { useCORS: true, scale: 2, backgroundColor: '#f2f2f7' }).then(function(canvas) {
					savedPreview.src = canvas.toDataURL('image/png');
					savedModal.classList.remove('is-hidden');
					savedModal.setAttribute('aria-hidden', 'false');
				}).catch(function(err) { console.warn('캡처 실패:', err); });
			});
			function closeSavedModal() {
				savedModal.classList.add('is-hidden');
				savedModal.setAttribute('aria-hidden', 'true');
			}
			if (savedClose) savedClose.addEventListener('click', closeSavedModal);
			savedModal.querySelector('.saved-image-modal-backdrop').addEventListener('click', closeSavedModal);
		}
	</script>
	<script src="https://pages.oss.navercorp.com/UIT/figma-sync/plugin/prod/core/resize.js"></script>
</html>
